<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="../static/layui/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../static/layui/style/admin.css" media="all">

    <script type="text/javascript" src="../static/jquery/jquery.min.js"></script>
    <script src="../static/layui/layui/layui.js"></script>
    <script src="../static/action/action.js"></script>
</head>
<body>
<table id="table" lay-filter="table"></table>
</body>
<script>
    var table;//数据表格对象
    var pageIndex;

    layui.config({
        base: '../static/layui/' //静态资源所在路径
    }).extend({
        index: '../layui/lib/index' //主入口模块
    }).use(['index', 'table'], function () {
        table = layui.table;

        table.render({ //初始化数据表格
            elem: '#table',
            url: '../time/myList',
            where: {
                schedule: -1
            },
            method: 'get',
            parseData: function(res){
                return {
                    'code': res.code,
                    'msg': res.msg,
                    'count': res.data.total,
                    'data': res.data.list
                };
            },
            height: $(window).height() - 40,
            page: true, //开启分页
            limit: 30,
            limits: [30, 60, 90],
            cols: [[
                {
                    type: 'checkbox'
                },
                {
                    field: 'tid',
                    title: '仓库编号',
                    hide: true
                }, {
                    field: 'user_id',
                    title: '用户ID',
                    width: '10%'
                }, {
                    field: 'address',
                    title: '地址',
                    width: '20%'
                }, {
                    field: 'starttime',
                    title: '开始时间',
                    width: '25%'
                }, {
                    field: 'endtime',
                    title: '结束时间',
                    width: '25%'
                }, {
                    field: 'schedule',
                    title: '是否被预约',
                    templet: function (row) {
                        return row.schedule == 0 ? "未预约" : "已预约";
                    }
                }
            ]
            ]
        });

    });
</script>
</html>